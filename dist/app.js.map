{"mappings":";;;;;;;AEAA;;;;CAIC,GACM,MAAM,4CAAoB;IAC/B,8BAA8B;IAC9B,MAAM,kBAAkB,SAAS,aAAa,CAAC;IAC/C,MAAM,kBAAkB,SAAS,aAAa,CAAC;IAE/C,2BAA2B;IAC3B,MAAM,oBAAoB,SAAS,aAAa,CAAC;IACjD,MAAM,oBAAoB,SAAS,aAAa,CAAC;IACjD,MAAM,kBAAkB,SAAS,aAAa,CAAC;IAE/C,mDAAmD;IACnD,IAAI,gBAAgB,KAAK,EAAE;QACzB,MAAM,aAAa,IAAI,KAAK,gBAAgB,KAAK;QACjD,kBAAkB,WAAW,GAAG,qCAAe;IACjD;IAEA,IAAI,gBAAgB,KAAK,EAAE;QACzB,MAAM,aAAa,IAAI,KAAK,gBAAgB,KAAK;QACjD,kBAAkB,WAAW,GAAG,qCAAe;IACjD;IAEA,uDAAuD;IACvD,IAAI,gBAAgB,KAAK,IAAI,gBAAgB,KAAK,EAAE;QAClD,MAAM,WAAW,wCACf,IAAI,KAAK,gBAAgB,KAAK,GAC9B,IAAI,KAAK,gBAAgB,KAAK;QAEhC,gBAAgB,WAAW,GAAG;IAChC;AACF;AAEA;;;;CAIC,GACD,MAAM,uCAAiB,CAAC;IACtB,OAAO,KAAK,cAAc,CAAC,SAAS;QAClC,MAAM;QACN,OAAO;QACP,KAAK;QACL,MAAM;QACN,QAAQ;IACV;AACF;AAEA;;;;;CAKC,GACD,MAAM,0CAAoB,CAAC,YAAY;IACrC,MAAM,WAAW,aAAa;IAC9B,MAAM,WAAW,KAAK,IAAI,CAAC,WAAY;IACvC,OAAO;AACT;;;AD1DA,oEAAoE;AACpE,SAAS;IACP,mBAAmB;IACnB,MAAM,qBAAqB,SAAS,aAAa,CAAC;IAClD,MAAM,iBAAiB,SAAS,aAAa,CAAC;IAC9C,MAAM,iBAAiB,SAAS,aAAa,CAAC;IAC9C,MAAM,qBAAqB,SAAS,aAAa,CAAC;IAClD,MAAM,kBAAkB,SAAS,aAAa,CAAC;IAC/C,MAAM,kBAAkB,SAAS,aAAa,CAAC;IAE/C,wCAAwC;IACxC,eAAe,OAAO,CAAC,mBAAmB,KAAK,CAAC,OAAO,GAAG;IAC1D,eAAe,OAAO,CAAC,mBAAmB,KAAK,CAAC,OAAO,GAAG;IAE1D,+DAA+D;IAC/D,eAAe,gBAAgB,CAAC,UAAU;QACxC,iEAAiE;QACjE,IAAI,IAAI,CAAC,aAAa,KAAK,GACzB,gBAAgB,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,IAAI;IAEvE;IAEA,eAAe,gBAAgB,CAAC,UAAU;QACxC,iEAAiE;QACjE,IAAI,IAAI,CAAC,aAAa,KAAK,GACzB,gBAAgB,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,IAAI;IAEvE;IAEA,iCAAiC;IACjC,mBAAmB,gBAAgB,CAAC,UAAU;QAC5C,4CAA4C;QAC5C,MAAM,eAAe,IAAI,CAAC,OAAO,GAAG,UAAU;QAC9C,eAAe,OAAO,CAAC,mBAAmB,KAAK,CAAC,OAAO,GAAG;QAC1D,eAAe,OAAO,CAAC,mBAAmB,KAAK,CAAC,OAAO,GAAG;QAE1D,2CAA2C;QAC3C,mBAAmB,WAAW,GAAG,IAAI,CAAC,OAAO,GAAG,WAAW;QAE3D,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YACjB,8BAA8B;YAC9B,eAAe,aAAa,GAAG;YAC/B,eAAe,aAAa,GAAG;YAC/B,gBAAgB,WAAW,GAAG;YAC9B,gBAAgB,WAAW,GAAG;QAChC;IACF;AACF;AAEA,oDAAoD;AACpD,SAAS,qCAAe,aAAa,EAAE,IAAI;IACzC,KAAK,IAAI,UAAU,cAAc,OAAO,CACtC,IAAI,OAAO,IAAI,KAAK,MAAM;QACxB,cAAc,KAAK,GAAG,OAAO,KAAK;QAClC;IACF;AAEJ;AAEO,SAAS;IACd,IAAI;IACJ,IAAI;IAEJ,4BAA4B;IAC5B,MAAM,mBAAmB;QACvB,YAAY;QACZ,YAAY;QACZ,SAAS;QACT,WAAW;QACX,iBAAiB;QACjB,UAAU,SAAU,aAAa,EAAE,OAAO;YACxC,uDAAuD;YACvD,IAAI,oBAAoB;gBACtB,mBAAmB,GAAG,CAAC,WAAW;gBAElC,2DAA2D;gBAC3D,MAAM,aAAa,mBAAmB,aAAa,CAAC,EAAE;gBACtD,IAAI,cAAc,aAAa,aAAa,CAAC,EAAE,EAAE;oBAC/C,mBAAmB,KAAK;oBACxB,oCACE;gBAEJ;YACF;YACA,CAAA,GAAA,yCAAgB;QAClB;IACF;IAEA,4BAA4B;IAC5B,MAAM,mBAAmB;QACvB,YAAY;QACZ,YAAY;QACZ,SAAS;QACT,WAAW;QACX,iBAAiB;QACjB,UAAU,SAAU,aAAa,EAAE,OAAO;YACxC,MAAM,aAAa,mBAAmB,aAAa,CAAC,EAAE;YAEtD,4CAA4C;YAC5C,IAAI,cAAc,aAAa,CAAC,EAAE,GAAG,YAAY;gBAC/C,mBAAmB,KAAK;gBACxB,oCACE;gBAEF;YACF;YACA,CAAA,GAAA,yCAAgB;QAClB;IACF;IAEA,4CAA4C;IAC5C,qBAAqB,CAAA,GAAA,0CAAQ,EAAE,kBAAkB;IACjD,qBAAqB,CAAA,GAAA,0CAAQ,EAAE,kBAAkB;IAEjD,8BAA8B;IAC9B,MAAM,YAAY;QAChB,YAAY;QACZ,SAAS,IAAI;QACb,WAAW;YAAC;YAAM,IAAI,OAAO,WAAW;SAAG;IAC7C;IAEA,gCAAgC;IAChC,MAAM,mBAAmB;QACvB,YAAY;QACZ,SAAS;IACX;IAEA,gCAAgC;IAChC,CAAA,GAAA,0CAAQ,EAAE,oBAAoB;IAC9B,CAAA,GAAA,0CAAQ,EAAE,sBAAsB;IAEhC,2CAA2C;IAC3C;AACF;AAEA,yCAAyC;AACzC,SAAS,oCAAc,OAAO;IAC5B,2CAA2C;IAC3C,MAAM,aAAa,SAChB,aAAa,CAAC,kBACd,OAAO,CAAC,oBACR,aAAa,CAAC;IAEjB,uBAAuB;IACvB,WAAW,aAAa,CAAC,qBAAqB,WAAW,GAAG;IAE5D,iBAAiB;IACjB,WAAW,SAAS,CAAC,MAAM,CAAC;IAE5B,iCAAiC;IACjC,WAAW;QACT,WAAW,SAAS,CAAC,GAAG,CAAC;IAC3B,GAAG;AACL;;;;AI1JA,6CAA6C;AAC7C,MAAM,+BAAS;IACb;QACE,IAAI;QACJ,MAAM;QACN,SAAS;QACT,QAAQ;QACR,aAAa;IACf;IACA;QACE,IAAI;QACJ,MAAM;QACN,SAAS;QACT,QAAQ;QACR,aAAa;IACf;IACA;QACE,IAAI;QACJ,MAAM;QACN,SAAS;QACT,QAAQ;QACR,aAAa;IACf;IACA;QACE,IAAI;QACJ,MAAM;QACN,SAAS;QACT,QAAQ;QACR,aAAa;IACf;IACA;QACE,IAAI;QACJ,MAAM;QACN,SAAS;QACT,QAAQ;QACR,aAAa;IACf;IACA;QACE,IAAI;QACJ,MAAM;QACN,SAAS;QACT,QAAQ;QACR,aAAa;IACf;IACA;QACE,IAAI;QACJ,MAAM;QACN,SAAS;QACT,QAAQ;QACR,aAAa;IACf;IACA;QACE,IAAI;QACJ,MAAM;QACN,SAAS;QACT,QAAQ;QACR,aAAa;IACf;IACA;QACE,IAAI;QACJ,MAAM;QACN,SAAS;QACT,QAAQ;QACR,aAAa;IACf;IACA;QACE,IAAI;QACJ,MAAM;QACN,SAAS;QACT,QAAQ;QACR,aAAa;IACf;IACA;QACE,IAAI;QACJ,MAAM;QACN,SAAS;QACT,QAAQ;QACR,aAAa;IACf;IACA;QACE,IAAI;QACJ,MAAM;QACN,SAAS;QACT,QAAQ;QACR,aAAa;IACf;IACA;QACE,IAAI;QACJ,MAAM;QACN,SAAS;QACT,QAAQ;QACR,aAAa;IACf;IACA;QACE,IAAI;QACJ,MAAM;QACN,SAAS;QACT,QAAQ;QACR,aAAa;IACf;IACA;QACE,IAAI;QACJ,MAAM;QACN,SAAS;QACT,QAAQ;QACR,aAAa;IACf;CACD,CAAC,GAAG,CAAC,CAAC,QAAW,CAAA;QAChB,GAAG,KAAK;QACR,KAAK,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,CAAC;QACxB,SAAS,CAAC,QAAQ,EAAE,MAAM,EAAE,CAAC,CAAC;QAC9B,SAAS,CAAC,cAAc,EAAE,MAAM,EAAE,CAAC,CAAC;QACpC,WAAW,CAAC,aAAa,EAAE,MAAM,EAAE,CAAC,CAAC;QACrC,yBAAyB;QACzB;YACE,OAAO;gBACL,UAAU,SAAS,aAAa,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;gBACnD,UAAU,SAAS,aAAa,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;gBACnD,SAAS,SAAS,aAAa,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;YACtD;QACF;QACA;YACE,MAAM,WAAW,IAAI,CAAC,WAAW;YACjC,OAAO,SAAS,QAAQ,IAAI,SAAS,QAAQ,IAAI,SAAS,OAAO;QACnE;IACF,CAAA;AAEA,MAAM,+CAAyB,CAAC;IAC9B,MAAM,QAAQ,6BAAO,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC1C,IAAI,CAAC,SAAS,CAAC,MAAM,OAAO,IAAI;IAEhC,MAAM,WAAW,MAAM,WAAW;IAClC,MAAM,WAAW,SAAS,SAAS,QAAQ,CAAC,KAAK,KAAK;IACtD,MAAM,WACJ,SAAS,SAAS,aAAa,CAAC,qBAAqB,gBAAgB;IAEvE,MAAM,OAAO,MAAM,MAAM,GACrB,MAAM,OAAO,GAAG,WAAW,WAC3B,MAAM,OAAO,GAAG;IAEpB,SAAS,OAAO,CAAC,WAAW,GAAG,KAAK,OAAO,CAAC;IAE5C,mDAAmD;IACnD;AACF;AAEA,8CAA8C;AAC9C,MAAM,0CAAoB;IACxB,MAAM,eAAe,SAAS,aAAa,CAAC;IAC5C,IAAI,CAAC,cAAc;IAEnB,MAAM,QAAQ,6BAAO,MAAM,CAAC,CAAC,KAAK;QAChC,IAAI,CAAC,MAAM,OAAO,IAAI,OAAO;QAE7B,MAAM,WAAW,MAAM,WAAW;QAClC,IAAI,CAAC,SAAS,QAAQ,CAAC,OAAO,IAAI,SAAS,OAAO,CAAC,WAAW,KAAK,KACjE,OAAO;QAGT,OAAO,MAAM,WAAW,SAAS,OAAO,CAAC,WAAW,IAAI;IAC1D,GAAG;IAEH,aAAa,WAAW,GAAG,MAAM,OAAO,CAAC;AAC3C;AAEO,MAAM,4CAAuB;IAClC,MAAM,QAAQ,6BAAO,MAAM,CAAC,CAAC,KAAK;QAChC,IAAI,CAAC,MAAM,OAAO,IAAI,OAAO;QAE7B,MAAM,WAAW,MAAM,WAAW;QAClC,IAAI,CAAC,SAAS,QAAQ,CAAC,OAAO,IAAI,SAAS,OAAO,CAAC,WAAW,KAAK,KACjE,OAAO;QAGT,OAAO,MAAM,WAAW,SAAS,OAAO,CAAC,WAAW,IAAI;IAC1D,GAAG;IAEH,6BAA6B;IAC7B,MAAM,eAAe,SAAS,aAAa,CAAC;IAC5C,IAAI,cACF,aAAa,WAAW,GAAG,MAAM,OAAO,CAAC;IAG3C,OAAO;AACT;AAEO,MAAM,4CAAmB;IAC9B,6BAAO,OAAO,CAAC,CAAC;QACd,IAAI,CAAC,MAAM,OAAO,IAAI;QAEtB,MAAM,WAAW,MAAM,WAAW;QAElC,SAAS,QAAQ,CAAC,gBAAgB,CAAC,UAAU;YAC3C,IAAI,SAAS,QAAQ,CAAC,OAAO,EAAE;gBAC7B,SAAS,QAAQ,CAAC,KAAK,GAAG,SAAS,QAAQ,CAAC,KAAK,IAAI;gBACrD,6CAAuB,MAAM,EAAE;YACjC,OAAO;gBACL,SAAS,QAAQ,CAAC,KAAK,GAAG;gBAC1B,SAAS,OAAO,CAAC,WAAW,GAAG;gBAC/B;YACF;YACA,CAAA,GAAA,yCAAc;QAChB;QAEA,SAAS,QAAQ,CAAC,gBAAgB,CAAC,UAAU;YAC3C,IAAI,SAAS,QAAQ,CAAC,OAAO,EAAE;gBAC7B,6CAAuB,MAAM,EAAE;gBAC/B,CAAA,GAAA,yCAAc;YAChB;QACF;IACF;IAEA;AACF;AAEO,MAAM,4CAAgB,CAAC;IAC5B,MAAM,QAAQ,6BAAO,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK;IAC5C,OAAO,QAAQ,MAAM,OAAO,GAAG;AACjC;;;AD1NA,YAAY;AACZ,MAAM,iCAAW;AACjB,MAAM,kCAAY;IAChB,cAAc;IACd,UAAU;IACV,aAAa;IACb,YAAY;IACZ,KAAK;IACL,UAAU;IACV,OAAO;AACT;AAEA,6DAA6D;AAC7D,MAAM,wCAAkB,CACtB,UACA,eAAe,CAAC,EAChB,YAAY,UAAU;IAEtB,IAAI;QACF,MAAM,UAAU,SAAS,aAAa,CAAC;QACvC,IAAI,CAAC,SAAS,OAAO;QACrB,MAAM,QAAQ,UAAU,SAAS,eAAe;QAChD,OAAO,MAAM,SAAS,eAAe;IACvC,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAEA,gDAAgD;AAChD,MAAM,sCAAgB,CAAC,UAAU;IAC/B,IAAI;QACF,MAAM,UAAU,SAAS,aAAa,CAAC;QACvC,IAAI,SACF,QAAQ,WAAW,GAAG,MAAM,OAAO,CAAC;IAExC,EAAE,OAAO,OAAO;IACd,wBAAwB;IAC1B;AACF;AAEO,MAAM,4CAAkB;IAC7B,IAAI;QACF,kBAAkB;QAClB,MAAM,aAAa;YACjB,cAAc,sCAAgB,gCAAU,YAAY;YACpD,UAAU,sCAAgB,gCAAU,QAAQ,EAAE,GAAG;YACjD,aAAa,sCAAgB,gCAAU,WAAW;QACpD;QAEA,uBAAuB;QACvB,MAAM,eAAe;YACnB,aAAa,CAAA,GAAA,yCAAmB;YAChC,aAAa,WAAW,YAAY,GAAG,WAAW,QAAQ;QAC5D;QAEA,mBAAmB;QACnB,MAAM,WACJ,aAAa,WAAW,GACxB,aAAa,WAAW,GACxB,WAAW,WAAW;QACxB,MAAM,MAAM,WAAW;QACvB,MAAM,QAAQ,WAAW;QAEzB,sBAAsB;QACtB,MAAM,UAAU;YACd,CAAC,gCAAU,UAAU,CAAC,EAAE,aAAa,WAAW;YAChD,CAAC,gCAAU,GAAG,CAAC,EAAE;YACjB,CAAC,gCAAU,QAAQ,CAAC,EAAE;YACtB,CAAC,gCAAU,KAAK,CAAC,EAAE;QACrB;QAEA,4BAA4B;QAC5B,OAAO,OAAO,CAAC,SAAS,OAAO,CAAC,CAAC,CAAC,UAAU,MAAM;YAChD,oCAAc,UAAU;QAC1B;QAEA,OAAO;sBAAE;iBAAU;mBAAK;QAAM;IAChC,EAAE,OAAO,OAAO;QACd,OAAO;YAAE,UAAU;YAAG,KAAK;YAAG,OAAO;QAAE;IACzC;AACF;;;ADhFO,MAAM,4CAA6B;IACxC,MAAM,gBAAgB,SAAS,gBAAgB,CAAC;IAEhD,cAAc,OAAO,CAAC,CAAC;QACrB,MAAM,gBAAgB,CAAC,UAAU,CAAC;YAChC,MAAM,cAAc,EAAE,MAAM,CACzB,OAAO,CAAC,kBACR,aAAa,CAAC,iBAAiB,WAAW;YAC7C,MAAM,eAAe,WAAW,EAAE,MAAM,CAAC,KAAK;YAE9C,yBAAyB;YACzB,SAAS,aAAa,CAAC,mBAAmB,WAAW,GAAG;YACxD,SAAS,aAAa,CAAC,yBAAyB,WAAW,GACzD,aAAa,OAAO,CAAC;YAEvB,CAAA,GAAA,yCAAc;QAChB;IACF;AACF;;;;AGpBA;;;;CAIC,GAED;;;;;;;CAOC,GACD,IAAI,uCAAiB;IACnB,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;AACP;AAEA;;;CAGC,GACD,MAAM,wCAAkB;IACtB,KAAK;QAAE,QAAQ;QAAM,UAAU;IAAE;IACjC,KAAK;QAAE,QAAQ;QAAK,UAAU;IAAE;IAChC,KAAK;QAAE,QAAQ;QAAK,UAAU;IAAE;IAChC,KAAK;QAAE,QAAQ;QAAK,UAAU;IAAE;AAClC;AAEA,mDAAmD;AACnD,MAAM,6CAAuB,SAAS,yBAAyB;AAC/D,IAAI,uCAAiB;AAErB,kCAAkC;AAClC,eAAe;IACb,MAAM,MAAM,KAAK,GAAG;IACpB,IAAI,MAAM,uCAAiB,4CACzB,QAAQ,sCAAsC;IAGhD,MAAM,QAAQ,MAAM;IACpB,IAAI,OAAO;QACT,uCAAiB;YAAE,GAAG,KAAK;QAAC;QAC5B,uCAAiB;IACnB;AACF;AAOO,MAAM,4CAA2B;IACtC,IAAI;QACF,MAAM,6CAAuB,oCAAoC;QAEjE,MAAM,iBAAiB,SAAS,gBAAgB,CAC9C;QAEF,IAAI,CAAC,eAAe,MAAM,EACxB,MAAM,IAAI,MAAM;QAGlB,MAAM,WAAW,SAAS,cAAc,CAAC;QACzC,IAAI,UAAU;YACZ,SAAS,OAAO,GAAG;YACnB,0CAAsB;QACxB;QAEA,8CAA8C;QAC9C,MAAM,gBAAgB,SACnB,aAAa,CAAC,2BACd,OAAO,CAAC;QACX,IAAI,eACF,cAAc,gBAAgB,CAAC,UAAU,CAAC;YACxC,IAAI,EAAE,MAAM,CAAC,IAAI,KAAK,kBACpB,2CAAqB;QAEzB;IAEJ,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yCAAyC;QACvD,uCAAiB;IACnB;AACF;AAEA;;;;CAIC,GACD,SAAS,2CAAqB,CAAC;IAC7B,MAAM,cAAc,EAAE,MAAM,CAAC,KAAK;IAClC,0CAAsB;AACxB;AAQO,MAAM,4CAAwB,CAAC;IACpC,IAAI;QACF,uCAAiB;QACjB,0CAAoB;QACpB,4CAAsB;IACxB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,uCAAiB,CAAC,2BAA2B,EAAE,MAAM,OAAO,CAAC,CAAC;IAChE;AACF;AAEA;;;;CAIC,GACD,SAAS,uCAAiB,OAAO;IAC/B,MAAM,aAAa,SAAS,aAAa,CAAC;IAC1C,IAAI,YAAY;QACd,WAAW,aAAa,CAAC,qBAAqB,WAAW,GAAG;QAC5D,WAAW,SAAS,CAAC,MAAM,CAAC;QAC5B,WAAW,IAAM,WAAW,SAAS,CAAC,GAAG,CAAC,cAAc;IAC1D;AACF;AAEA;;;;CAIC,GACD,SAAS,uCAAiB,QAAQ;IAChC,MAAM,OAAO,oCAAc,CAAC,SAAS;IACrC,IAAI,CAAC,MACH,MAAM,IAAI,MAAM,CAAC,kBAAkB,EAAE,SAAS,CAAC;AAEnD;AAEA;;;CAGC,GACD,SAAS,0CAAoB,QAAQ;IACnC,MAAM,OAAO,oCAAc,CAAC,SAAS;IACrC,MAAM,SAAS,qCAAe,CAAC,SAAS;IAExC,8CAA8C;IAC9C,SAAS,gBAAgB,CAAC,mBAAmB,OAAO,CAAC,CAAC;QACpD,0BAA0B;QAC1B,IAAI,QAAQ,EAAE,KAAK,mBAAmB;QACtC,IAAI,QAAQ,WAAW,KAAK,KAAK;QAEjC,+CAA+C;QAC/C,IACE,CAAC,QAAQ,YAAY,CAAC,0BACtB,QAAQ,WAAW,KAAK,KAExB,QAAQ,YAAY,CAAC,uBAAuB,QAAQ,WAAW;QAGjE,6BAA6B;QAC7B,MAAM,gBAAgB,WACpB,QAAQ,YAAY,CAAC;QAGvB,IAAI,CAAC,MAAM,gBAAgB;YACzB,iCAAiC;YACjC,IAAI,QAAQ,EAAE,KAAK,wBAAwB;gBACzC,MAAM,iBAAiB,AAAC,CAAA,gBAAgB,IAAG,EAAG,OAAO,CAAC,OAAO,QAAQ;gBACrE,QAAQ,WAAW,GAAG;YACxB,OAAO,IAAI,QAAQ,EAAE,CAAC,UAAU,CAAC,kBAAkB;gBACjD,MAAM,iBAAiB,AAAC,CAAA,gBAAgB,IAAG,EAAG,OAAO,CAAC,OAAO,QAAQ;gBACrE,QAAQ,WAAW,GAAG;YACxB,OAAO,IAAI,QAAQ,EAAE,KAAK,uBAAuB;gBAC/C,MAAM,iBAAiB,AAAC,CAAA,gBAAgB,IAAG,EAAG,OAAO,CAAC,OAAO,QAAQ;gBACrE,QAAQ,WAAW,GAAG;YACxB;QACF;IACF;IAEA,qEAAqE;IACrE,2CAAqB,MAAM,OAAO,QAAQ;IAC1C,2CAAqB,MAAM,OAAO,QAAQ;AAC5C;AAEA;;;;CAIC,GACD,SAAS,2CAAqB,IAAI,EAAE,QAAQ;IAC1C,MAAM,qBAAqB,SAAS,aAAa,CAAC;IAClD,IAAI,CAAC,oBAAoB;IAEzB,IAAI,cAAc;IAClB,SAAS,gBAAgB,CAAC,yBAAyB,OAAO,CAAC,CAAC;QAC1D,IAAI,aAAa,WAAW,KAAK,KAAK;YACpC,MAAM,gBAAgB,WACpB,aAAa,YAAY,CAAC;YAE5B,IAAI,CAAC,MAAM,gBACT,eAAe;QAEnB;IACF;IAEA,2CAA2C;IAC3C,MAAM,iBAAiB,AAAC,CAAA,cAAc,IAAG,EAAG,OAAO,CAAC;IACpD,mBAAmB,WAAW,GAAG;IAEjC,2BAA2B;IAC3B,IAAI,CAAC,mBAAmB,YAAY,CAAC,wBACnC,mBAAmB,YAAY,CAC7B,uBACA,YAAY,QAAQ;AAG1B;AAEA;;;;CAIC,GACD,SAAS,2CAAqB,IAAI,EAAE,QAAQ;IAC1C,MAAM,WAAW;QACf,UAAU,SAAS,aAAa,CAAC;QACjC,KAAK,SAAS,aAAa,CAAC;QAC5B,OAAO,SAAS,aAAa,CAAC;IAChC;IAEA,0BAA0B;IAC1B,MAAM,eAAe,WACnB,SACG,aAAa,CAAC,0BACb,aAAa,0BAA0B;IAE7C,MAAM,WAAW,SACf,SAAS,aAAa,CAAC,qBAAqB,eAAe;IAE7D,MAAM,cAAc,WAClB,SACG,aAAa,CAAC,yBACb,aAAa,0BAA0B;IAE7C,MAAM,cAAc,WAClB,SACG,aAAa,CAAC,wBACb,aAAa,0BAA0B;IAG7C,yBAAyB;IACzB,MAAM,cAAc,eAAe,WAAW,cAAc;IAC5D,MAAM,SAAS,cAAc,MAAM,eAAe;IAClD,MAAM,WAAW,cAAc;IAE/B,sBAAsB;IACtB,IAAI,SAAS,QAAQ,EAAE;QACrB,SAAS,QAAQ,CAAC,WAAW,GAAG,AAAC,CAAA,cAAc,IAAG,EAAG,OAAO,CAAC;QAC7D,SAAS,QAAQ,CAAC,YAAY,CAC5B,uBACA,YAAY,QAAQ;IAExB;IACA,IAAI,SAAS,GAAG,EAAE;QAChB,SAAS,GAAG,CAAC,WAAW,GAAG,AAAC,CAAA,SAAS,IAAG,EAAG,OAAO,CAAC;QACnD,SAAS,GAAG,CAAC,YAAY,CAAC,uBAAuB,OAAO,QAAQ;IAClE;IACA,IAAI,SAAS,KAAK,EAAE;QAClB,SAAS,KAAK,CAAC,WAAW,GAAG,AAAC,CAAA,WAAW,IAAG,EAAG,OAAO,CAAC;QACvD,SAAS,KAAK,CAAC,YAAY,CAAC,uBAAuB,SAAS,QAAQ;IACtE;AACF;AAEA;;;CAGC,GACD,SAAS,4CAAsB,QAAQ;IACrC,SAAS,gBAAgB,CAAC,oBAAoB,OAAO,CAAC,CAAC;QACrD,QAAQ,WAAW,GAAG;IACxB;AACF;AAEA,MAAM,gCAAU,4BAA4B,mCAAmC;AAC/E,MAAM,iCAAW;AASV,eAAe,0CAAmB,eAAe,KAAK;IAC3D,IAAI;QACF,MAAM,aAAa,IAAI;QACvB,MAAM,YAAY,WAAW,IAAM,WAAW,KAAK,IAAI,OAAO,mBAAmB;QAEjF,MAAM,WAAW,MAAM,MACrB,CAAC,EAAE,+BAAS,CAAC,EAAE,8BAAQ,QAAQ,EAAE,aAAa,CAAC,EAC/C;YAAE,QAAQ,WAAW,MAAM;QAAC;QAG9B,aAAa;QAEb,IAAI,CAAC,SAAS,EAAE,EACd,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,SAAS,MAAM,CAAC,CAAC;QAG1D,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,KAAK,MAAM,KAAK,WAClB,OAAO,KAAK,gBAAgB;aAE5B,MAAM,IAAI,MAAM,IAAI,CAAC,aAAa,IAAI;IAE1C,EAAE,OAAO,OAAO;QACd,IAAI,MAAM,IAAI,KAAK,cACjB,QAAQ,KAAK,CAAC;aAEd,QAAQ,KAAK,CAAC,kCAAkC;QAElD,OAAO;IACT;AACF;;;;ACzUA;;;;CAIC,GAED;;;;CAIC,GACD,eAAe;IACb,MAAM,UAAU;IAEhB,IAAI;QACF,MAAM,WAAW,MAAM,MAAM;QAC7B,IAAI,CAAC,SAAS,EAAE,EACd,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,SAAS,MAAM,CAAC,CAAC;QAE1D,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,EAAE;IACX;AACF;AAOO,MAAM,4CAAwB;IACnC,MAAM,gBAAgB,SAAS,aAAa,CAAC;IAC7C,IAAI,CAAC,eAAe;QAClB,QAAQ,IAAI,CAAC;QACb;IACF;IAEA,IAAI;QACF,oDAAoD;QACpD,MAAM,UAAU,IAAI,QAAQ,eAAe;YACzC,eAAe;YACf,wBAAwB;YACxB,aAAa;YACb,kBAAkB;YAClB,kBAAkB;YAClB,QAAQ;QACV;QAEA,gCAAgC;QAChC,MAAM,YAAY,MAAM;QACxB,MAAM,mBAAmB,2CAAqB;QAE9C,6CAA6C;QAC7C,QAAQ,UAAU,CAAC,kBAAkB,SAAS,SAAS;IACzD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sCAAsC;IACtD;AACF;AAEA;;;;CAIC,GACD,SAAS,2CAAqB,SAAS;IACrC,OAAO,UACJ,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,EAAE,IAAI,CAAC,MAAM,GACxD,GAAG,CAAC,CAAC,UAAa,CAAA;YACjB,OAAO,QAAQ,IAAI;YACnB,OAAO,QAAQ,IAAI,CAAC,MAAM;QAC5B,CAAA;AACJ;;;APzEA;AAUA,qBAAqB;AACrB,OAAO,OAAO,KAAK,EAAE;AACrB,OAAO,OAAO,CAAC,IAAI,CAAC;IAClB,MAAM,wBAAwB;QAC5B,IAAI;YACF,MAAM,OAAO,SAAS,aAAa,CAAC;YACpC,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;YAE3B,KAAK,SAAS,CAAC,GAAG,CAAC;YAEnB,MAAM,CAAA,GAAA,yCAAoB;YAE1B,MAAM,QAAQ,GAAG,CAAC;gBAChB,CAAA,GAAA,yCAAoB;gBACpB,CAAA,GAAA,yCAAyB;gBACzB,CAAA,GAAA,yCAAe;gBACf,CAAA,GAAA,yCAAuB;aACxB;YAED;YACA,CAAA,GAAA,yCAAc;YACd,KAAK,SAAS,CAAC,MAAM,CAAC;QACxB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,oCAAoC;YAClD,UACE;QAEJ;IACF;IAEA,MAAM,uBAAuB;QAC3B,MAAM,OAAO,SAAS,aAAa,CAAC;QACpC,IAAI,CAAC,MAAM;QAEX,KAAK,gBAAgB,CAAC,UAAU,OAAO;YACrC,EAAE,cAAc;YAEhB,IAAI;gBACF,KAAK,SAAS,CAAC,GAAG,CAAC;gBAEnB,IAAI,CAAC,aAAa,OAChB,MAAM,IAAI,MAAM;gBAGlB,MAAM,WAAW,IAAI,SAAS;gBAC9B,YAAY;YACd,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,0BAA0B;gBACxC,UAAU,MAAM,OAAO;YACzB,SAAU;gBACR,KAAK,SAAS,CAAC,MAAM,CAAC;YACxB;QACF;IACF;IAEA,MAAM,eAAe,CAAC;QACpB,OAAO;IACT;IAEA,MAAM,YAAY,CAAC;QACjB,MAAM,aAAa,SAAS,aAAa,CAAC;QAC1C,IAAI,YAAY;YACd,WAAW,aAAa,CAAC,qBAAqB,WAAW,GAAG;YAC5D,WAAW,SAAS,CAAC,MAAM,CAAC;YAC5B,WAAW,IAAM,WAAW,SAAS,CAAC,GAAG,CAAC,cAAc;QAC1D;IACF;IAEA,MAAM,cAAc,CAAC;QACnB,MAAM,eAAe,SAAS,aAAa,CAAC;QAC5C,IAAI,cAAc;YAChB,aAAa,aAAa,CAAC,uBAAuB,WAAW,GAAG;YAChE,aAAa,SAAS,CAAC,MAAM,CAAC;YAC9B,WAAW,IAAM,aAAa,SAAS,CAAC,GAAG,CAAC,cAAc;QAC5D;IACF;IAEA;AACF","sources":["js/app.js","js/modules/datePickers.js","js/modules/displayCalculations.js","js/modules/vehicleSelection.js","js/modules/calculations.js","js/modules/extras.js","js/modules/apiExchange.js","js/modules/apiChoice.js"],"sourcesContent":["\"use strict\";\n\n// Import dependencies using ESM syntax\nimport { initializeDatePickers } from \"./modules/datePickers.js\";\nimport { initializeVehicleSelection } from \"./modules/vehicleSelection.js\";\nimport { initializeExtras } from \"./modules/extras.js\";\nimport { initializeCurrencyToggle } from \"./modules/apiExchange.js\";\nimport { calculateTotals } from \"./modules/calculations.js\";\nimport { populateCountrySelect } from \"./modules/apiChoice.js\";\n\n// Initialize Webflow\nwindow.Webflow ||= [];\nwindow.Webflow.push(() => {\n  const initializeBookingForm = async () => {\n    try {\n      const form = document.querySelector(\"#booking_form\");\n      if (!form) throw new Error(\"Booking form not found\");\n\n      form.classList.add(\"loading\");\n\n      await populateCountrySelect();\n\n      await Promise.all([\n        initializeDatePickers(),\n        initializeVehicleSelection(),\n        initializeExtras(),\n        initializeCurrencyToggle(),\n      ]);\n\n      handleFormSubmission();\n      calculateTotals();\n      form.classList.remove(\"loading\");\n    } catch (error) {\n      console.error(\"Error initializing booking form:\", error);\n      showError(\n        \"There was an error loading the booking form. Please refresh the page.\"\n      );\n    }\n  };\n\n  const handleFormSubmission = () => {\n    const form = document.querySelector(\"#wf-form-Booking-form\");\n    if (!form) return;\n\n    form.addEventListener(\"submit\", async (e) => {\n      e.preventDefault();\n\n      try {\n        form.classList.add(\"submitting\");\n\n        if (!validateForm(form)) {\n          throw new Error(\"Please fill in all required fields\");\n        }\n\n        const formData = new FormData(form);\n        showSuccess(\"Booking submitted successfully!\");\n      } catch (error) {\n        console.error(\"Form submission error:\", error);\n        showError(error.message);\n      } finally {\n        form.classList.remove(\"submitting\");\n      }\n    });\n  };\n\n  const validateForm = (form) => {\n    return true;\n  };\n\n  const showError = (message) => {\n    const errorAlert = document.querySelector(\".error-alert-bg\");\n    if (errorAlert) {\n      errorAlert.querySelector(\".error-alert-text\").textContent = message;\n      errorAlert.classList.remove(\"is-hidden\");\n      setTimeout(() => errorAlert.classList.add(\"is-hidden\"), 5000);\n    }\n  };\n\n  const showSuccess = (message) => {\n    const successAlert = document.querySelector(\".success-alert-bg\");\n    if (successAlert) {\n      successAlert.querySelector(\".success-alert-text\").textContent = message;\n      successAlert.classList.remove(\"is-hidden\");\n      setTimeout(() => successAlert.classList.add(\"is-hidden\"), 5000);\n    }\n  };\n\n  initializeBookingForm();\n});\n","import flatpickr from \"flatpickr\";\r\nimport { updateDateDisplay } from \"./displayCalculations\";\r\n\r\n// Add this function to handle pickup location visibility and values\r\nfunction initializePickupLocation() {\r\n  // Get DOM elements\r\n  const pickupConfirmation = document.querySelector(\"#pickup-confirmation\");\r\n  const pickupLocation = document.querySelector(\"#i-pickup-location\");\r\n  const returnLocation = document.querySelector(\"#i-return-location\");\r\n  const deliveryFeeElement = document.querySelector(\"#v-calc-delivery-fee\");\r\n  const vPickupLocation = document.querySelector(\"#v-pickup-location\");\r\n  const vReturnLocation = document.querySelector(\"#v-return-location\");\r\n\r\n  // Set initial state - hidden by default\r\n  pickupLocation.closest(\".input-dropdown\").style.display = \"none\";\r\n  returnLocation.closest(\".input-dropdown\").style.display = \"none\";\r\n\r\n  // Add event listener to select fields to update display values\r\n  pickupLocation.addEventListener(\"change\", function () {\r\n    // Only update if a real option is selected (not the placeholder)\r\n    if (this.selectedIndex !== 0) {\r\n      vPickupLocation.textContent = this.options[this.selectedIndex].text;\r\n    }\r\n  });\r\n\r\n  returnLocation.addEventListener(\"change\", function () {\r\n    // Only update if a real option is selected (not the placeholder)\r\n    if (this.selectedIndex !== 0) {\r\n      vReturnLocation.textContent = this.options[this.selectedIndex].text;\r\n    }\r\n  });\r\n\r\n  // Add event listener to checkbox\r\n  pickupConfirmation.addEventListener(\"change\", function () {\r\n    // Toggle visibility based on checkbox state\r\n    const displayStyle = this.checked ? \"block\" : \"none\";\r\n    pickupLocation.closest(\".input-dropdown\").style.display = displayStyle;\r\n    returnLocation.closest(\".input-dropdown\").style.display = displayStyle;\r\n\r\n    // Set delivery fee based on checkbox state\r\n    deliveryFeeElement.textContent = this.checked ? \"250.00\" : \"0.00\";\r\n\r\n    if (!this.checked) {\r\n      // Reset values when unchecked\r\n      pickupLocation.selectedIndex = 0;\r\n      returnLocation.selectedIndex = 0;\r\n      vPickupLocation.textContent = \"-\";\r\n      vReturnLocation.textContent = \"-\";\r\n    }\r\n  });\r\n}\r\n\r\n// Helper function to set select value based on text\r\nfunction setSelectValue(selectElement, text) {\r\n  for (let option of selectElement.options) {\r\n    if (option.text === text) {\r\n      selectElement.value = option.value;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nexport function initializeDatePickers() {\r\n  let pickupDateInstance;\r\n  let returnDateInstance;\r\n\r\n  // Pickup Date Configuration\r\n  const pickupDateConfig = {\r\n    enableTime: true,\r\n    dateFormat: \"Y-m-d H:i\",\r\n    minDate: \"today\",\r\n    time_24hr: true,\r\n    minuteIncrement: 30,\r\n    onChange: function (selectedDates, dateStr) {\r\n      // Update return date min date when pickup date changes\r\n      if (returnDateInstance) {\r\n        returnDateInstance.set(\"minDate\", dateStr);\r\n\r\n        // If return date is earlier than new pickup date, clear it\r\n        const returnDate = returnDateInstance.selectedDates[0];\r\n        if (returnDate && returnDate < selectedDates[0]) {\r\n          returnDateInstance.clear();\r\n          showDateAlert(\r\n            \"Return date cannot be earlier than pickup date. Please select a new return date.\"\r\n          );\r\n        }\r\n      }\r\n      updateDateDisplay();\r\n    },\r\n  };\r\n\r\n  // Return Date Configuration\r\n  const returnDateConfig = {\r\n    enableTime: true,\r\n    dateFormat: \"Y-m-d H:i\",\r\n    minDate: \"today\",\r\n    time_24hr: true,\r\n    minuteIncrement: 30,\r\n    onChange: function (selectedDates, dateStr) {\r\n      const pickupDate = pickupDateInstance.selectedDates[0];\r\n\r\n      // Validate return date is after pickup date\r\n      if (pickupDate && selectedDates[0] < pickupDate) {\r\n        returnDateInstance.clear();\r\n        showDateAlert(\r\n          \"Return date cannot be earlier than pickup date. Please select a valid date.\"\r\n        );\r\n        return;\r\n      }\r\n      updateDateDisplay();\r\n    },\r\n  };\r\n\r\n  // Initialize pickup and return date pickers\r\n  pickupDateInstance = flatpickr(\"#i-pickup-date\", pickupDateConfig);\r\n  returnDateInstance = flatpickr(\"#i-return-date\", returnDateConfig);\r\n\r\n  // Date of Birth Configuration\r\n  const dobConfig = {\r\n    dateFormat: \"Y-m-d\",\r\n    maxDate: new Date(),\r\n    yearRange: [1900, new Date().getFullYear()],\r\n  };\r\n\r\n  // Expiration Date Configuration\r\n  const expirationConfig = {\r\n    dateFormat: \"Y-m-d\",\r\n    minDate: \"today\",\r\n  };\r\n\r\n  // Initialize other date pickers\r\n  flatpickr(\"#i-date-of-birth\", dobConfig);\r\n  flatpickr(\"#i-expiration-date\", expirationConfig);\r\n\r\n  // Add this line at the end of the function\r\n  initializePickupLocation();\r\n}\r\n\r\n// Function to show date validation alert\r\nfunction showDateAlert(message) {\r\n  // Find the return date error alert element\r\n  const errorAlert = document\r\n    .querySelector(\"#i-return-date\")\r\n    .closest(\".f-field-wrapper\")\r\n    .querySelector(\".error-alert-bg\");\r\n\r\n  // Update error message\r\n  errorAlert.querySelector(\".error-alert-text\").textContent = message;\r\n\r\n  // Show the error\r\n  errorAlert.classList.remove(\"is-hidden\");\r\n\r\n  // Hide the error after 5 seconds\r\n  setTimeout(() => {\r\n    errorAlert.classList.add(\"is-hidden\");\r\n  }, 5000);\r\n}\r\n","/**\r\n * Updates the display elements with the selected dates and calculates duration\r\n * @param {string} pickupDateId - ID of the pickup date input element\r\n * @param {string} returnDateId - ID of the return date input element\r\n */\r\nexport const updateDateDisplay = () => {\r\n  // Get the date input elements\r\n  const pickupDateInput = document.querySelector(\"#i-pickup-date\");\r\n  const returnDateInput = document.querySelector(\"#i-return-date\");\r\n\r\n  // Get the display elements\r\n  const pickupDateDisplay = document.querySelector(\"#v-pickup-date\");\r\n  const returnDateDisplay = document.querySelector(\"#v-return-date\");\r\n  const durationDisplay = document.querySelector(\"#v-calc-duration\");\r\n\r\n  // Update the display elements with formatted dates\r\n  if (pickupDateInput.value) {\r\n    const pickupDate = new Date(pickupDateInput.value);\r\n    pickupDateDisplay.textContent = formatDateTime(pickupDate);\r\n  }\r\n\r\n  if (returnDateInput.value) {\r\n    const returnDate = new Date(returnDateInput.value);\r\n    returnDateDisplay.textContent = formatDateTime(returnDate);\r\n  }\r\n\r\n  // Calculate and display duration if both dates are set\r\n  if (pickupDateInput.value && returnDateInput.value) {\r\n    const duration = calculateDuration(\r\n      new Date(pickupDateInput.value),\r\n      new Date(returnDateInput.value)\r\n    );\r\n    durationDisplay.textContent = duration;\r\n  }\r\n};\r\n\r\n/**\r\n * Formats a date object to a readable string\r\n * @param {Date} date - The date to format\r\n * @returns {string} Formatted date string\r\n */\r\nconst formatDateTime = (date) => {\r\n  return date.toLocaleString(\"en-US\", {\r\n    year: \"numeric\",\r\n    month: \"long\",\r\n    day: \"numeric\",\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n  });\r\n};\r\n\r\n/**\r\n * Calculates the duration in days between two dates\r\n * @param {Date} pickupDate - The pickup date\r\n * @param {Date} returnDate - The return date\r\n * @returns {number} Number of days between dates\r\n */\r\nconst calculateDuration = (pickupDate, returnDate) => {\r\n  const diffTime = returnDate - pickupDate;\r\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n  return diffDays;\r\n};\r\n","import { calculateTotals } from \"./calculations\";\r\n\r\nexport const initializeVehicleSelection = () => {\r\n  const vehicleInputs = document.querySelectorAll('input[name=\"vehicle\"]');\r\n\r\n  vehicleInputs.forEach((input) => {\r\n    input.addEventListener(\"change\", (e) => {\r\n      const vehicleName = e.target\r\n        .closest(\".f-radio-field\")\r\n        .querySelector(\".vehicle-name\").textContent;\r\n      const vehiclePrice = parseFloat(e.target.value);\r\n\r\n      // Update vehicle display\r\n      document.querySelector(\"#v-vehicle-name\").textContent = vehicleName;\r\n      document.querySelector(\"#v-calc-vehicle-price\").textContent =\r\n        vehiclePrice.toFixed(2);\r\n\r\n      calculateTotals();\r\n    });\r\n  });\r\n};\r\n","import { calculateExtrasTotal } from \"./extras\";\n\n// Constants\nconst TAX_RATE = 0.15;\nconst SELECTORS = {\n  vehiclePrice: \"#v-calc-vehicle-price\",\n  duration: \"#v-calc-duration\",\n  deliveryFee: \"#v-calc-delivery-fee\",\n  totalExtra: \"#v-calc-total-extra\",\n  tax: \"#v-calc-tax\",\n  subtotal: \"#v-calc-subtotal\",\n  total: \"#v-calc-total\",\n};\n\n// Helper function to safely get numeric values from elements\nconst getNumericValue = (\n  selector,\n  defaultValue = 0,\n  parseFunc = parseFloat\n) => {\n  try {\n    const element = document.querySelector(selector);\n    if (!element) return defaultValue;\n    const value = parseFunc(element?.textContent || defaultValue);\n    return isNaN(value) ? defaultValue : value;\n  } catch (error) {\n    return defaultValue;\n  }\n};\n\n// Helper function to safely update element text\nconst updateElement = (selector, value) => {\n  try {\n    const element = document.querySelector(selector);\n    if (element) {\n      element.textContent = value.toFixed(2);\n    }\n  } catch (error) {\n    // Silent error handling\n  }\n};\n\nexport const calculateTotals = () => {\n  try {\n    // Get base values\n    const baseValues = {\n      vehiclePrice: getNumericValue(SELECTORS.vehiclePrice),\n      duration: getNumericValue(SELECTORS.duration, 0, parseInt),\n      deliveryFee: getNumericValue(SELECTORS.deliveryFee),\n    };\n\n    // Calculate components\n    const calculations = {\n      extrasTotal: calculateExtrasTotal(),\n      vehicleCost: baseValues.vehiclePrice * baseValues.duration,\n    };\n\n    // Calculate totals\n    const subtotal =\n      calculations.vehicleCost +\n      calculations.extrasTotal +\n      baseValues.deliveryFee;\n    const tax = subtotal * TAX_RATE;\n    const total = subtotal + tax;\n\n    // Update all displays\n    const updates = {\n      [SELECTORS.totalExtra]: calculations.extrasTotal,\n      [SELECTORS.tax]: tax,\n      [SELECTORS.subtotal]: subtotal,\n      [SELECTORS.total]: total,\n    };\n\n    // Batch update DOM elements\n    Object.entries(updates).forEach(([selector, value]) => {\n      updateElement(selector, value);\n    });\n\n    return { subtotal, tax, total };\n  } catch (error) {\n    return { subtotal: 0, tax: 0, total: 0 };\n  }\n};\n","import { calculateTotals } from \"./calculations\";\n\n// Optimized EXTRAS array with proper mapping\nconst EXTRAS = [\n  {\n    id: 1,\n    name: \"NAD-45-000.00-Excess-Waiver\",\n    baseFee: 45000,\n    perDay: false,\n    displayName: \"NAD 45,000.00 Excess Waiver\",\n  },\n  {\n    id: 2,\n    name: \"Tyre-Glass-Waiver\",\n    baseFee: 165,\n    perDay: true,\n    displayName: \"Tyre & Glass Waiver @ 165.00 p.d\",\n  },\n  {\n    id: 3,\n    name: \"Cross-Border-Charge\",\n    baseFee: 100,\n    perDay: false,\n    displayName: \"Cross Border Charge @ 100.00\",\n  },\n  {\n    id: 4,\n    name: \"Satellite-Phone-N-6000-Excess\",\n    baseFee: 140,\n    perDay: true,\n    displayName: \"Satellite Phone (N$6000 Excess) @ 140.00 p.d\",\n  },\n  {\n    id: 5,\n    name: \"Satellite-Phone-Zero-Excess\",\n    baseFee: 170,\n    perDay: true,\n    displayName: \"Satellite Phone (Zero Excess) @ 170.00 p.d\",\n  },\n  {\n    id: 6,\n    name: \"Camping-Equipment---Double-Cab\",\n    baseFee: 170,\n    perDay: true,\n    displayName: \"Camping Equipment - Double Cab @ NAD 170.00 p.d\",\n  },\n  {\n    id: 7,\n    name: \"Roof-Tents-Required\",\n    baseFee: 60,\n    perDay: true,\n    displayName: \"Roof Tents Required @ NAD 60.00 p.d\",\n  },\n  {\n    id: 8,\n    name: \"Engel-40L-Fridge-Freezer\",\n    baseFee: 90,\n    perDay: true,\n    displayName: \"Engel 40L Fridge/Freezer @ 90.00 p.d\",\n  },\n  {\n    id: 9,\n    name: \"Bedding-incl.-1x-sleeping-bag-1x-pillow\",\n    baseFee: 20,\n    perDay: true,\n    displayName: \"Bedding (incl. 1x sleeping bag + 1x pillow) @ 20.00 p.d\",\n  },\n  {\n    id: 10,\n    name: \"GPS-System\",\n    baseFee: 75,\n    perDay: true,\n    displayName: \"GPS System @ 75.00 p.d\",\n  },\n  {\n    id: 11,\n    name: \"SAT-Phone-Minutes\",\n    baseFee: 825,\n    perDay: false,\n    displayName: \"SAT Phone Minutes @ 825.00 once.off\",\n  },\n  {\n    id: 12,\n    name: \"Kitchen-wash-up-kit-small-dish-wash-liquid-2x-drying-cloth-2x-sponge-2x-cleaning-cloth-extras\",\n    baseFee: 150,\n    perDay: false,\n    displayName: \"Kitchen wash up kit @ 150.00 once.off\",\n  },\n  {\n    id: 13,\n    name: \"Ground-Tent\",\n    baseFee: 0,\n    perDay: false,\n    displayName: \"Free Ground Tent\",\n  },\n  {\n    id: 14,\n    name: \"Jerry-Can\",\n    baseFee: 10,\n    perDay: true,\n    displayName: \"Jerry Can @ 10.00 p.d\",\n  },\n  {\n    id: 15,\n    name: \"Baby-Seat\",\n    baseFee: 0,\n    perDay: false,\n    displayName: \"Free Baby Seat\",\n  },\n].map((extra) => ({\n  ...extra,\n  key: `extra-${extra.id}`,\n  inputId: `i-extra-${extra.id}`,\n  countId: `i-count-extra-${extra.id}`,\n  displayId: `v-calc-extra-${extra.id}`,\n  // Add validation helpers\n  getElements() {\n    return {\n      checkbox: document.querySelector(`#${this.inputId}`),\n      quantity: document.querySelector(`#${this.countId}`),\n      display: document.querySelector(`#${this.displayId}`),\n    };\n  },\n  isValid() {\n    const elements = this.getElements();\n    return elements.checkbox && elements.quantity && elements.display;\n  },\n}));\n\nconst updateExtraCalculation = (extraId) => {\n  const extra = EXTRAS.find((e) => e.id === extraId);\n  if (!extra || !extra.isValid()) return;\n\n  const elements = extra.getElements();\n  const quantity = parseInt(elements.quantity.value) || 0;\n  const duration =\n    parseInt(document.querySelector(\"#v-calc-duration\")?.textContent) || 0;\n\n  const cost = extra.perDay\n    ? extra.baseFee * quantity * duration\n    : extra.baseFee * quantity;\n\n  elements.display.textContent = cost.toFixed(2);\n\n  // Update total extras after individual calculation\n  updateExtrasTotal();\n};\n\n// New function to update extras total display\nconst updateExtrasTotal = () => {\n  const totalElement = document.querySelector(\"#v-calc-total-extra\");\n  if (!totalElement) return;\n\n  const total = EXTRAS.reduce((sum, extra) => {\n    if (!extra.isValid()) return sum;\n\n    const elements = extra.getElements();\n    if (!elements.checkbox.checked || elements.display.textContent === \"-\") {\n      return sum;\n    }\n\n    return sum + parseFloat(elements.display.textContent || \"0\");\n  }, 0);\n\n  totalElement.textContent = total.toFixed(2);\n};\n\nexport const calculateExtrasTotal = () => {\n  const total = EXTRAS.reduce((sum, extra) => {\n    if (!extra.isValid()) return sum;\n\n    const elements = extra.getElements();\n    if (!elements.checkbox.checked || elements.display.textContent === \"-\") {\n      return sum;\n    }\n\n    return sum + parseFloat(elements.display.textContent || \"0\");\n  }, 0);\n\n  // Update the display element\n  const totalElement = document.querySelector(\"#v-calc-total-extra\");\n  if (totalElement) {\n    totalElement.textContent = total.toFixed(2);\n  }\n\n  return total;\n};\n\nexport const initializeExtras = () => {\n  EXTRAS.forEach((extra) => {\n    if (!extra.isValid()) return;\n\n    const elements = extra.getElements();\n\n    elements.checkbox.addEventListener(\"change\", () => {\n      if (elements.checkbox.checked) {\n        elements.quantity.value = elements.quantity.value || \"1\";\n        updateExtraCalculation(extra.id);\n      } else {\n        elements.quantity.value = \"\";\n        elements.display.textContent = \"-\";\n        updateExtrasTotal();\n      }\n      calculateTotals();\n    });\n\n    elements.quantity.addEventListener(\"change\", () => {\n      if (elements.checkbox.checked) {\n        updateExtraCalculation(extra.id);\n        calculateTotals();\n      }\n    });\n  });\n\n  updateExtrasTotal();\n};\n\nexport const getExtraPrice = (extraName) => {\n  const extra = EXTRAS.find((e) => e.name === extraName);\n  return extra ? extra.baseFee : 0;\n};\n","/**\r\n * API Exchange Module\r\n * Handles currency conversion functionality with real-time exchange rates\r\n * @module apiExchange\r\n */\r\n\r\n/**\r\n * Exchange rates configuration\r\n * @constant {Object}\r\n * @property {number} NAD - Base currency (Namibian Dollar)\r\n * @property {number} USD - US Dollar rate\r\n * @property {number} EUR - Euro rate\r\n * @property {number} GBP - British Pound rate\r\n */\r\nlet EXCHANGE_RATES = {\r\n  NAD: 1,\r\n  USD: 0.054,\r\n  EUR: 0.049,\r\n  GBP: 0.042,\r\n};\r\n\r\n/**\r\n * Currency display configuration\r\n * @constant {Object}\r\n */\r\nconst CURRENCY_CONFIG = {\r\n  NAD: { symbol: \"N$\", decimals: 2 },\r\n  USD: { symbol: \"$\", decimals: 2 },\r\n  EUR: { symbol: \"€\", decimals: 2 },\r\n  GBP: { symbol: \"£\", decimals: 2 },\r\n};\r\n\r\n// At the top of the file, add rate update tracking\r\nconst RATE_UPDATE_INTERVAL = 3600000; // 1 hour in milliseconds\r\nlet lastRateUpdate = 0;\r\n\r\n// Add rate updating functionality\r\nasync function updateExchangeRates() {\r\n  const now = Date.now();\r\n  if (now - lastRateUpdate < RATE_UPDATE_INTERVAL) {\r\n    return; // Skip if rates were updated recently\r\n  }\r\n\r\n  const rates = await fetchExchangeRates();\r\n  if (rates) {\r\n    EXCHANGE_RATES = { ...rates };\r\n    lastRateUpdate = now;\r\n  }\r\n}\r\n\r\n/**\r\n * Initializes currency toggle functionality\r\n * @exports initializeCurrencyToggle\r\n * @throws {Error} If currency inputs are not found\r\n */\r\nexport const initializeCurrencyToggle = async () => {\r\n  try {\r\n    await updateExchangeRates(); // Get fresh rates on initialization\r\n\r\n    const currencyInputs = document.querySelectorAll(\r\n      'input[name=\"currency-group\"]'\r\n    );\r\n    if (!currencyInputs.length) {\r\n      throw new Error(\"No currency inputs found\");\r\n    }\r\n\r\n    const nadRadio = document.getElementById(\"i-currency-nad\");\r\n    if (nadRadio) {\r\n      nadRadio.checked = true;\r\n      updateCurrencyDisplay(\"NAD\");\r\n    }\r\n\r\n    // Use event delegation for better performance\r\n    const currencyGroup = document\r\n      .querySelector('[name=\"currency-group\"]')\r\n      .closest(\"form\");\r\n    if (currencyGroup) {\r\n      currencyGroup.addEventListener(\"change\", (e) => {\r\n        if (e.target.name === \"currency-group\") {\r\n          handleCurrencyChange(e);\r\n        }\r\n      });\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Failed to initialize currency toggle:\", error);\r\n    showErrorMessage(\"Currency initialization failed\");\r\n  }\r\n};\r\n\r\n/**\r\n * Handles currency change events\r\n * @param {Event} e - Change event\r\n * @private\r\n */\r\nfunction handleCurrencyChange(e) {\r\n  const newCurrency = e.target.value;\r\n  updateCurrencyDisplay(newCurrency);\r\n}\r\n\r\n/**\r\n * Updates all price displays with the new currency\r\n * @param {string} newCurrency - The currency code to convert to\r\n * @exports updateCurrencyDisplay\r\n * @throws {Error} If currency is invalid\r\n */\r\nexport const updateCurrencyDisplay = (newCurrency) => {\r\n  try {\r\n    validateCurrency(newCurrency);\r\n    updatePriceElements(newCurrency);\r\n    updateCurrencySymbols(newCurrency);\r\n  } catch (error) {\r\n    console.error(\"Error updating currency:\", error);\r\n    showErrorMessage(`Failed to update currency: ${error.message}`);\r\n  }\r\n};\r\n\r\n/**\r\n * Shows error message to user\r\n * @param {string} message - Error message to display\r\n * @private\r\n */\r\nfunction showErrorMessage(message) {\r\n  const errorAlert = document.querySelector(\".error-alert-bg\");\r\n  if (errorAlert) {\r\n    errorAlert.querySelector(\".error-alert-text\").textContent = message;\r\n    errorAlert.classList.remove(\"is-hidden\");\r\n    setTimeout(() => errorAlert.classList.add(\"is-hidden\"), 5000);\r\n  }\r\n}\r\n\r\n/**\r\n * Validates the currency code\r\n * @param {string} currency - The currency code to validate\r\n * @throws {Error} If currency is invalid\r\n */\r\nfunction validateCurrency(currency) {\r\n  const rate = EXCHANGE_RATES[currency];\r\n  if (!rate) {\r\n    throw new Error(`Invalid currency: ${currency}`);\r\n  }\r\n}\r\n\r\n/**\r\n * Updates all price elements with converted values\r\n * @param {string} currency - The currency to convert to\r\n */\r\nfunction updatePriceElements(currency) {\r\n  const rate = EXCHANGE_RATES[currency];\r\n  const config = CURRENCY_CONFIG[currency];\r\n\r\n  // First, handle all individual price elements\r\n  document.querySelectorAll('[id^=\"v-calc-\"]').forEach((element) => {\r\n    // Skip non-price elements\r\n    if (element.id === \"v-calc-duration\") return;\r\n    if (element.textContent === \"-\") return;\r\n\r\n    // Store original NAD value on first conversion\r\n    if (\r\n      !element.hasAttribute(\"data-original-price\") &&\r\n      element.textContent !== \"-\"\r\n    ) {\r\n      element.setAttribute(\"data-original-price\", element.textContent);\r\n    }\r\n\r\n    // Get the original NAD price\r\n    const originalPrice = parseFloat(\r\n      element.getAttribute(\"data-original-price\")\r\n    );\r\n\r\n    if (!isNaN(originalPrice)) {\r\n      // Handle different element types\r\n      if (element.id === \"v-calc-vehicle-price\") {\r\n        const convertedPrice = (originalPrice * rate).toFixed(config.decimals);\r\n        element.textContent = convertedPrice;\r\n      } else if (element.id.startsWith(\"v-calc-extra-\")) {\r\n        const convertedPrice = (originalPrice * rate).toFixed(config.decimals);\r\n        element.textContent = convertedPrice;\r\n      } else if (element.id === \"v-calc-delivery-fee\") {\r\n        const convertedPrice = (originalPrice * rate).toFixed(config.decimals);\r\n        element.textContent = convertedPrice;\r\n      }\r\n    }\r\n  });\r\n\r\n  // Then, recalculate totals after all individual prices are converted\r\n  calculateTotalExtras(rate, config.decimals);\r\n  calculateFinalTotals(rate, config.decimals);\r\n}\r\n\r\n/**\r\n * Calculate total extras in the current currency\r\n * @param {number} rate - Current exchange rate\r\n * @param {number} decimals - Number of decimal places\r\n */\r\nfunction calculateTotalExtras(rate, decimals) {\r\n  const totalExtrasElement = document.querySelector(\"#v-calc-total-extra\");\r\n  if (!totalExtrasElement) return;\r\n\r\n  let totalExtras = 0;\r\n  document.querySelectorAll('[id^=\"v-calc-extra-\"]').forEach((extraElement) => {\r\n    if (extraElement.textContent !== \"-\") {\r\n      const originalPrice = parseFloat(\r\n        extraElement.getAttribute(\"data-original-price\")\r\n      );\r\n      if (!isNaN(originalPrice)) {\r\n        totalExtras += originalPrice;\r\n      }\r\n    }\r\n  });\r\n\r\n  // Convert total extras to current currency\r\n  const convertedTotal = (totalExtras * rate).toFixed(decimals);\r\n  totalExtrasElement.textContent = convertedTotal;\r\n\r\n  // Store original NAD value\r\n  if (!totalExtrasElement.hasAttribute(\"data-original-price\")) {\r\n    totalExtrasElement.setAttribute(\r\n      \"data-original-price\",\r\n      totalExtras.toString()\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Calculate final totals (subtotal, tax, total) in the current currency\r\n * @param {number} rate - Current exchange rate\r\n * @param {number} decimals - Number of decimal places\r\n */\r\nfunction calculateFinalTotals(rate, decimals) {\r\n  const elements = {\r\n    subtotal: document.querySelector(\"#v-calc-subtotal\"),\r\n    tax: document.querySelector(\"#v-calc-tax\"),\r\n    total: document.querySelector(\"#v-calc-total\"),\r\n  };\r\n\r\n  // Get original NAD values\r\n  const vehiclePrice = parseFloat(\r\n    document\r\n      .querySelector(\"#v-calc-vehicle-price\")\r\n      ?.getAttribute(\"data-original-price\") || \"0\"\r\n  );\r\n  const duration = parseInt(\r\n    document.querySelector(\"#v-calc-duration\")?.textContent || \"0\"\r\n  );\r\n  const deliveryFee = parseFloat(\r\n    document\r\n      .querySelector(\"#v-calc-delivery-fee\")\r\n      ?.getAttribute(\"data-original-price\") || \"0\"\r\n  );\r\n  const totalExtras = parseFloat(\r\n    document\r\n      .querySelector(\"#v-calc-total-extra\")\r\n      ?.getAttribute(\"data-original-price\") || \"0\"\r\n  );\r\n\r\n  // Calculate in NAD first\r\n  const subtotalNAD = vehiclePrice * duration + deliveryFee + totalExtras;\r\n  const taxNAD = subtotalNAD * 0.15; // 15% tax rate\r\n  const totalNAD = subtotalNAD + taxNAD;\r\n\r\n  // Convert and display\r\n  if (elements.subtotal) {\r\n    elements.subtotal.textContent = (subtotalNAD * rate).toFixed(decimals);\r\n    elements.subtotal.setAttribute(\r\n      \"data-original-price\",\r\n      subtotalNAD.toString()\r\n    );\r\n  }\r\n  if (elements.tax) {\r\n    elements.tax.textContent = (taxNAD * rate).toFixed(decimals);\r\n    elements.tax.setAttribute(\"data-original-price\", taxNAD.toString());\r\n  }\r\n  if (elements.total) {\r\n    elements.total.textContent = (totalNAD * rate).toFixed(decimals);\r\n    elements.total.setAttribute(\"data-original-price\", totalNAD.toString());\r\n  }\r\n}\r\n\r\n/**\r\n * Updates all currency symbols in the UI\r\n * @param {string} currency - The new currency symbol to display\r\n */\r\nfunction updateCurrencySymbols(currency) {\r\n  document.querySelectorAll(\".currency-symbol\").forEach((element) => {\r\n    element.textContent = currency;\r\n  });\r\n}\r\n\r\nconst API_KEY = \"f8eb8575dc0df45769f9bc6c\"; // Replace with your actual API key\r\nconst BASE_URL = \"https://v6.exchangerate-api.com/v6\";\r\n\r\n/**\r\n * Optimize the fetchExchangeRates function with better error handling\r\n * @exports fetchExchangeRates\r\n * @param {string} baseCurrency - The base currency code\r\n * @returns {Promise<Object>} - The exchange rates for the specified base currency\r\n * @throws {Error} If an error occurs while fetching exchange rates\r\n */\r\nexport async function fetchExchangeRates(baseCurrency = \"NAD\") {\r\n  try {\r\n    const controller = new AbortController();\r\n    const timeoutId = setTimeout(() => controller.abort(), 5000); // 5 second timeout\r\n\r\n    const response = await fetch(\r\n      `${BASE_URL}/${API_KEY}/latest/${baseCurrency}`,\r\n      { signal: controller.signal }\r\n    );\r\n\r\n    clearTimeout(timeoutId);\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    if (data.result === \"success\") {\r\n      return data.conversion_rates;\r\n    } else {\r\n      throw new Error(data[\"error-type\"] || \"Failed to fetch exchange rates\");\r\n    }\r\n  } catch (error) {\r\n    if (error.name === \"AbortError\") {\r\n      console.error(\"Request timed out\");\r\n    } else {\r\n      console.error(\"Error fetching exchange rates:\", error);\r\n    }\r\n    return null;\r\n  }\r\n}\r\n","/**\r\n * API Choice Module\r\n * Handles country selection functionality using the REST Countries API\r\n * @module apiChoice\r\n */\r\n\r\n/**\r\n * Fetches country data from the REST Countries API\r\n * @async\r\n * @returns {Promise<Array>} Array of country objects, or empty array if fetch fails\r\n */\r\nasync function fetchCountries() {\r\n  const API_URL = \"https://restcountries.com/v3.1/all\";\r\n\r\n  try {\r\n    const response = await fetch(API_URL);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n    const data = await response.json();\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Error fetching countries:\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n * Populates the country select dropdown with data from the REST Countries API\r\n * @async\r\n * @exports populateCountrySelect\r\n */\r\nexport const populateCountrySelect = async () => {\r\n  const countrySelect = document.querySelector(\"#i-country\");\r\n  if (!countrySelect) {\r\n    console.warn(\"Country select element not found\");\r\n    return;\r\n  }\r\n\r\n  try {\r\n    // Initialize Choices.js dropdown with configuration\r\n    const choices = new Choices(countrySelect, {\r\n      searchEnabled: true,\r\n      searchPlaceholderValue: \"Search for a country\",\r\n      placeholder: true,\r\n      placeholderValue: \"Select a country\",\r\n      removeItemButton: true,\r\n      silent: true,\r\n    });\r\n\r\n    // Fetch and format country data\r\n    const countries = await fetchCountries();\r\n    const formattedChoices = formatCountryChoices(countries);\r\n\r\n    // Update the dropdown with formatted choices\r\n    choices.setChoices(formattedChoices, \"value\", \"label\", true);\r\n  } catch (error) {\r\n    console.error(\"Error initializing country select:\", error);\r\n  }\r\n};\r\n\r\n/**\r\n * Formats country data for the Choices.js dropdown\r\n * @param {Array} countries - Array of country objects from the API\r\n * @returns {Array} Formatted array of choice objects\r\n */\r\nfunction formatCountryChoices(countries) {\r\n  return countries\r\n    .sort((a, b) => a.name.common.localeCompare(b.name.common))\r\n    .map((country) => ({\r\n      value: country.cca2,\r\n      label: country.name.common,\r\n    }));\r\n}\r\n"],"names":[],"version":3,"file":"app.js.map"}